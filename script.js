const trainingPlan = [
  {
    "date": "2024-08-19",
    "title": "Baseline Run + Strength",
    "details": [
      "5-minute dynamic warm-up",
      "Run 1.5 km at a steady pace",
      "Rest 2 minutes",
      "3 rounds of: 8 push-ups, 12 squats, 8 burpees",
      "5-minute cool-down walk"
    ]
  },
  {
    "date": "2024-08-20",
    "title": "HIIT Workout",
    "details": [
      "30 seconds each, 30 seconds rest, 3 rounds:",
      "• High knees",
      "• Mountain climbers",
      "• Squat jumps",
      "• Push-ups (on knees if needed)",
      "• Plank hold",
      "1-minute rest between rounds"
    ]
  },
  {
    "date": "2024-08-21",
    "title": "Interval Run",
    "details": [
      "5-minute walk/light jog warm-up",
      "6 x (1-minute brisk run, 1-minute walk)",
      "5-minute cool-down walk"
    ]
  },
  {
    "date": "2024-08-22",
    "title": "Strength Circuit",
    "details": [
      "3 rounds of:",
      "• 12 bodyweight squats",
      "• 8 push-ups (on knees if needed)",
      "• 12 lunges (6 each leg)",
      "• 20-second plank",
      "1-minute rest between rounds"
    ]
  },
  {
    "date": "2024-08-23",
    "title": "Endurance Challenge",
    "details": [
      "5-minute warm-up",
      "Run 1.5 km at a comfortable pace",
      "Rest 2 minutes",
      "15 burpees",
      "20 mountain climbers",
      "Run 400m to finish",
      "5-minute cool-down"
    ]
  },
  {
    "date": "2024-08-24",
    "title": "Obstacle Course Simulation",
    "details": [
      "Create a circuit and repeat for 15 minutes:",
      "• 100m run",
      "• 8 step-ups (use a sturdy bench or step)",
      "• 8 push-ups",
      "• 10 squat jumps",
      "• 15-second wall sit",
      "Rest as needed between rounds"
    ]
  },
  {
    "date": "2024-08-25",
    "title": "Active Recovery",
    "details": [
      "30-minute brisk walk",
      "15 minutes of gentle stretching"
    ]
  },
  {
    "date": "2024-08-26",
    "title": "Progressive Run",
    "details": [
      "5-minute warm-up walk",
      "Run 1.8 km, taking walking breaks if needed",
      "Finish with 3 x 15-second sprint, 45-second walk",
      "5-minute cool-down walk"
    ]
  },
  {
    "date": "2024-08-27",
    "title": "Strength and Cardio Mix",
    "details": [
      "4 rounds of:",
      "• 10 bodyweight squats",
      "• 8 push-ups",
      "• 12 reverse lunges (6 each leg)",
      "• 30 seconds of high knees",
      "1-minute rest between rounds"
    ]
  },
  {
    "date": "2024-08-28",
    "title": "Tempo Run Intervals",
    "details": [
      "5-minute walk/light jog warm-up",
      "4 x (2-minute brisk run, 1-minute walk)",
      "5-minute cool-down walk"
    ]
  },
  {
    "date": "2024-08-29",
    "title": "Bodyweight Circuit",
    "details": [
      "3 rounds of:",
      "• 10 jump squats",
      "• 8 push-ups",
      "• 15 mountain climbers",
      "• 8 burpees",
      "1-minute rest between rounds"
    ]
  },
  {
    "date": "2024-08-30",
    "title": "Endurance Builder",
    "details": [
      "5-minute warm-up walk",
      "Run 2 km at steady pace, taking short walking breaks if needed",
      "Rest 2 minutes",
      "30 air squats, 15 push-ups, 30 sit-ups",
      "5-minute cool-down walk"
    ]
  },
  {
    "date": "2024-08-31",
    "title": "Obstacle Strength Circuit",
    "details": [
      "3 rounds of:",
      "• 8 bench dips",
      "• 12 lunges with twist",
      "• 10 bicycle crunches",
      "• 20-second wall sit",
      "90 seconds rest between rounds"
    ]
  },
  {
    "date": "2024-09-01",
    "title": "Recovery Run",
    "details": [
      "15-minute easy-paced run/walk",
      "Focus on form and breathing",
      "10 minutes of stretching"
    ]
  },
  {
    "date": "2024-09-02",
    "title": "Sprint and Strength",
    "details": [
      "5-minute warm-up",
      "5 x (20-second sprint, 40-second walk)",
      "Then 2 rounds of:",
      "• 10 push-ups",
      "• 15 squat jumps",
      "• 10 dips (using a bench or chair)",
      "5-minute cool-down"
    ]
  },
  {
    "date": "2024-09-03",
    "title": "Endurance Challenge",
    "details": [
      "5-minute warm-up walk",
      "Run 2 km, taking short walking breaks if needed",
      "Rest 2 minutes",
      "20 burpees",
      "30 mountain climbers",
      "Run 500m to finish",
      "5-minute cool-down walk"
    ]
  },
  {
    "date": "2024-09-04",
    "title": "AMRAP Workout",
    "details": [
      "15-minute AMRAP (As Many Rounds As Possible):",
      "• 100m run",
      "• 8 push-ups",
      "• 12 squats",
      "• 15 mountain climbers"
    ]
  },
  {
    "date": "2024-09-05",
    "title": "Interval and Strength Mix",
    "details": [
      "5-minute warm-up",
      "6 rounds of:",
      "• 45-second brisk run",
      "• 30 seconds bodyweight squats",
      "• 30 seconds push-ups (on knees if needed)",
      "• 30 seconds rest",
      "Finish with 2 rounds of 15 jump squats",
      "5-minute cool-down"
    ]
  },
  {
    "date": "2024-09-06",
    "title": "Long Run Challenge",
    "details": [
      "5-minute warm-up walk",
      "Run 2.5 km, with a 1-minute walk break every 1 km",
      "Rest 2 minutes",
      "Finish with 20 burpees",
      "5-minute cool-down walk"
    ]
  },
  {
    "date": "2024-09-07",
    "title": "Obstacle Course Simulation",
    "details": [
      "Create a circuit and repeat for 20 minutes:",
      "• 150m run",
      "• 10 step-ups (use a sturdy bench or step)",
      "• 10 push-ups",
      "• 15 squat jumps",
      "• 20-second wall sit",
      "Rest as needed between rounds"
    ]
  },
  {
    "date": "2024-09-08",
    "title": "Active Recovery",
    "details": [
      "30-minute brisk walk or light jog",
      "15 minutes of gentle stretching"
    ]
  },
  {
    "date": "2024-09-09",
    "title": "Interval Ladder",
    "details": [
      "5-minute warm-up",
      "Run intervals: 1-2-3-2-1 minutes (moderate effort)",
      "1-minute walk between each interval",
      "Finish with 2 x 8 burpees",
      "5-minute cool-down"
    ]
  },
  {
    "date": "2024-09-10",
    "title": "Strength Endurance",
    "details": [
      "4 rounds of:",
      "• 12 bodyweight squats",
      "• 10 push-ups (on knees if needed)",
      "• 12 lunges (6 each leg)",
      "• 15 mountain climbers",
      "• 30-second plank",
      "1-minute rest between rounds"
    ]
  },
  {
    "date": "2024-09-11",
    "title": "Time Trial",
    "details": [
      "5-minute warm-up walk/light jog",
      "Run 2 km as fast as you comfortably can",
      "Record your time",
      "Rest 2 minutes",
      "Finish with 2 rounds of 10 burpees",
      "5-minute cool-down walk"
    ]
  },
  {
    "date": "2024-09-12",
    "title": "Final Obstacle Prep",
    "details": [
      "5-minute warm-up",
      "25-minute circuit (repeat as many rounds as possible):",
      "• 200m run",
      "• 8 burpees",
      "• 12 step-ups (use a sturdy bench or step)",
      "• 8 push-ups",
      "• 15 mountain climbers",
      "5-minute cool-down"
    ]
  },
  {
    "date": "2024-09-13",
    "title": "Easy Run",
    "details": [
      "20-minute easy-paced run/walk",
      "Focus on maintaining good form",
      "10 minutes of light stretching"
    ]
  },
  {
    "date": "2024-09-14",
    "title": "Light Mobility Work",
    "details": [
      "20 minutes of light jogging or brisk walking",
      "15 minutes of dynamic stretching",
      "10 minutes of mobility exercises"
    ]
  },
  {
    "date": "2024-09-15",
    "title": "Rest and Preparation",
    "details": [
      "Complete rest",
      "Review race day strategy",
      "Prepare gear for the obstacle run",
      "Focus on proper nutrition and hydration"
    ]
  }
];

const ProgressRing = ({ progress }) => {
  const circumference = 2 * Math.PI * 27;
  const strokeDashoffset = circumference - (progress / 100) * circumference;

  return React.createElement(
    'div',
    { className: 'progress-container' },
    React.createElement(
      'svg',
      { className: 'progress-ring', width: '60', height: '60' },
      React.createElement('circle', {
        className: 'progress-ring__circle',
        stroke: '#0A84FF',
        strokeWidth: '4',
        fill: 'transparent',
        r: '27',
        cx: '30',
        cy: '30',
        strokeDasharray: `${circumference} ${circumference}`,
        style: { strokeDashoffset }
      })
    ),
    React.createElement(
      'span',
      { className: 'progress-text' },
      `${Math.round(progress)}%`
    )
  );
};

const App = () => {
  const [startDate, setStartDate] = React.useState(() => {
    const saved = localStorage.getItem('startDate');
    return saved ? new Date(saved) : new Date();
  });
  const [completedDays, setCompletedDays] = React.useState(() => {
    const saved = localStorage.getItem('completedDays');
    return saved ? new Set(JSON.parse(saved)) : new Set();
  });
  const [swiper, setSwiper] = React.useState(null);

  React.useEffect(() => {
    localStorage.setItem('startDate', startDate.toISOString());
  }, [startDate]);

  React.useEffect(() => {
    localStorage.setItem('completedDays', JSON.stringify([...completedDays]));
  }, [completedDays]);

  React.useEffect(() => {
    if (swiper) {
      const today = new Date();
      const diffTime = Math.abs(today - startDate);
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      swiper.slideTo(diffDays - 1, 0);
    }
  }, [swiper, startDate]);

  const toggleDayCompletion = (date) => {
    setCompletedDays(prevCompletedDays => {
      const newCompletedDays = new Set(prevCompletedDays);
      if (newCompletedDays.has(date)) {
        newCompletedDays.delete(date);
      } else {
        newCompletedDays.add(date);
      }
      return newCompletedDays;
    });
  };

  const getDateForDay = (date) => {
    return new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
  };

  React.useEffect(() => {
    const swiperInstance = new Swiper('.swiper-container', {
      effect: 'coverflow',
      grabCursor: true,
      centeredSlides: true,
      slidesPerView: 'auto',
      coverflowEffect: {
        rotate: 5,
        stretch: 0,
        depth: 100,
        modifier: 3,
        slideShadows: false,
      },
      touchEventsTarget: 'container',
      containerModifierClass: 'swiper-container-',
      slideToClickedSlide: true,
      loop: false,
      on: {
        init: function () {
          setTimeout(() => {
            equalizeCardHeights();
          }, 100);
        },
        resize: function () {
          setTimeout(() => {
            equalizeCardHeights();
          }, 100);
        }
      }
    });
    setSwiper(swiperInstance);
  }, []);

  const equalizeCardHeights = () => {
    const cards = document.querySelectorAll('.card');
    let maxHeight = 0;
    cards.forEach(card => {
      card.style.height = 'auto';
      const height = card.offsetHeight;
      maxHeight = Math.max(maxHeight, height);
    });
    cards.forEach(card => {
      card.style.height = `${maxHeight}px`;
    });
  };

  const progress = (completedDays.size / trainingPlan.length) * 100;

  return React.createElement(
    'div',
    { className: 'container' },
    React.createElement('h1', null, 'Fitness Training Plan'),
    React.createElement(ProgressRing, { progress: progress }),
    React.createElement(
      'div',
      { className: 'swiper-container' },
      React.createElement(
        'div',
        { className: 'swiper-wrapper' },
        trainingPlan.map((workout) =>
          React.createElement(
            'div',
            { key: workout.date, className: 'swiper-slide' },
            React.createElement('div', { className: 'card' },
              React.createElement('h2', null, `${getDateForDay(workout.date)}: ${workout.title}`),
              React.createElement('div', { className: 'card-content' },
                React.createElement(
                  'ul',
                  null,
                  workout.details.map((detail, index) =>
                    React.createElement('li', { key: index }, detail)
                  )
                )
              ),
              React.createElement(
                'button',
                {
                  className: `mark-done ${completedDays.has(workout.date) ? 'completed' : ''}`,
                  onClick: () => toggleDayCompletion(workout.date)
                },
                completedDays.has(workout.date) ? 'Completed' : 'Mark as Done'
              )
            )
          )
        )
      )
    )
  );
};

ReactDOM.render(React.createElement(App), document.getElementById('root'));